<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1,,user-scalable=no">

    <title>编辑 | {{ note.note_title}} | Roy's Cafe</title>
    <!--css导入区-->
    {% load static %}
    <link rel="stylesheet" href="{% static '/bootstrap/css/bootstrap.min.css/' %}">
    <link rel="stylesheet" href="{% static '/wangeditor/wangeditor.min.css' %}">
    <link rel="stylesheet" href="{% static '/bootstrap-icons/bootstrap-icons.css' %}">
    <!--/css导入区-->
</head>
<body>
    <div class="sticky-top bg-light border-bottom">
        <div class="container">
            <div class="row">
                <nav class="navbar navbar-light border-bottom">
                    <a href="{% url 'Notebook_note_detail' note.note_id %}" class="col-1 text-center">
                        <i class="text-success bi bi-arrow-left-circle" style="font-size: 1.5rem;"></i>
                    </a>
                    <span class="col-8 h5 text-center" style="margin: 0px;">编辑：{{ note.note_title }}</span>
                    <a href="#" class="col-1 text-center">
                        <i class="text-success bi bi-gear-wide-connected" style="font-size: 1.5rem;"></i>
                    </a>
                </nav>
            </div>
        </div>
        <div id="toolbar_container" class="hidden"></div>
    </div>

    <div>
        <div id="editor_container" style="min-height: 20%;height: 80%"></div>
    </div>

    <i class="bi bi-arrow-up-circle-fill" style="position: fixed;bottom: 5%;right: 5%;font-size: 2rem; color: cornflowerblue;"></i>
    <textarea id="content_storage" class="invisible"></textarea>
    <!--JS导入区-->
    <script src="{% static '/jquery/jquery.min.js/' %}"></script>
    <script src="{% static '/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static '/wangeditor/wangeditor.min.js' %}"></script>
    <script>
        const { createEditor, createToolbar } = window.wangEditor
        const editorConfig = {}
        editorConfig.placeholder = '请输内容'
        editorConfig.autoFocus = true
        editorConfig.scroll =true
        editorConfig.onChange = (editor) => {
            // 当编辑器选区、内容变化时，即触发
            const content = editor.children
            const html = editor.getHtml()
            document.getElementById('content_storage').value = html
        }
        // 创建编辑器
        const editor = createEditor({
            selector: '#editor_container',
            config: editorConfig,
            mode: 'default',
            html: '{{ note.note_content|safe }}'
        })
        // 创建工具栏
        const toolbar = createToolbar({
            editor,
            selector: '#toolbar_container',
            mode: 'default'
        })
    </script>
    <!--/JS导入区-->
</body>
</html>